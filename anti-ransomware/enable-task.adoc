---
sidebar: sidebar
permalink: anti-ransomware/enable-task.html
keywords: ransomware, arp, enable, set up, autonomous ransomware protection
summary: "Beginning with ONTAP 9.10.1, you can enable Autonomous Ransomware Protection (ARP) on new or existing volumes."
---
= Enable ONTAP Autonomous Ransomware Protection
:icons: font
:imagesdir: ../media/

[.lead]
Beginning with ONTAP 9.10.1, you can enable Autonomous Ransomware Protection (ARP) on an existing volume or create a new volume and enable ARP from the beginning.

If you want to configure your ONTAP cluster so that all new volumes will be enabled by default for Autonomous Ransomware Protection (ARP), see this link:enable-default-task.html[related ARP procedure].

//This procedure applies to FAS, AFF, and ASA systems. If you have an ASA r2 system (ASA A1K, ASA A90, ASA A70, ASA A50, ASA A30, or ASA A20), follow these steps (link to be provided) to enable ARP.

.Before you begin

The enablement process differs based on your ONTAP version:

[cols="25,25,50",options="header"]
|===
| Volume type | Environment and version | Enablement behavior

.2+| NAS FlexGroup
| ONTAP 9.18.1 and later
| ARP/AI is active immediately with no learning period

//no cell due to span
| ONTAP 9.10.1 to 9.17.1
| Starts in learning mode for 30 days

.2+| NAS FlexVol
| ONTAP 9.16.1 and later
| ARP/AI is active immediately with no learning period

//no cell due to span
| ONTAP 9.10.1 to 9.15.1
| Starts in learning mode for 30 days

| SAN volumes
| ONTAP 9.17.1 and later
| Enters evaluation period to establish baseline
|===

Select the procedure that matches your environment:

* <<enable-nas-flexvol,NAS with FlexVol volumes>>
* <<enable-nas-flexgroup,NAS with FlexGroup volumes>>
* <<enable-san,SAN volumes>>

== Prerequisites

Before enabling ARP, ensure you have:

* A storage VM (SVM) with protocols enabled:
** NAS: NFS or SMB (or both)
** SAN: iSCSI, FC, or NVMe
* The link:index.html#licenses-and-enablement[correct license] for your ONTAP version
* NAS or SAN workload with clients configured
* (NAS environments only) An active link:../concepts/namespaces-junction-points-concept.html[junction path] for the volume
* Volume capacity less than 100% full
* (Recommended) EMS system configured to send email notifications for ARP activity. See link:../error-messages/configure-ems-events-send-email-task.html[Configure EMS events to send email notifications].
* (Recommended) Multi-admin verification (MAV) enabled (ONTAP 9.13.1+). See link:../multi-admin-verify/enable-disable-task.html[Enable multi-admin verification].

[[enable-nas-flexvol]]
== Enable ARP on NAS FlexVol volumes

You can enable ARP on NAS FlexVol volumes using System Manager or the ONTAP CLI. The process differs based on your ONTAP version.

[role="tabbed-block"]
====
.ONTAP 9.16.1 and later
--
Beginning with ONTAP 9.16.1, ARP/AI is active immediately with no learning period required.

*System Manager*

. Select *Storage > Volumes*, then select the volume you want to protect.
. In the *Security* tab of the *Volumes* overview, select *Status* to switch from Disabled to Enabled.
. Verify the ARP state of the volume in the *Anti-ransomware* box.
+
To display ARP status for all volumes: In the *Volumes* pane, select *Show/Hide* then ensure that *Anti-ransomware* status is checked.

*CLI*

*Enable ARP on an existing volume:*

[source, cli]
----
security anti-ransomware volume enable -volume <vol_name> -vserver <svm_name>
----

*Create a new volume with ARP enabled:*

[source, cli]
----
volume create -volume <vol_name> -vserver <svm_name> -aggregate <aggr_name> -size <nn> -anti-ransomware-state enabled -junction-path </path_name>
----

*Verify the ARP state:*

[source, cli]
----
security anti-ransomware volume show
----

Learn more about `security anti-ransomware volume show` in the link:https://docs.netapp.com/us-en/ontap-cli/security-anti-ransomware-volume-show.html[ONTAP command reference^].
--

.ONTAP 9.10.1 to 9.15.1
--
For ONTAP 9.10.1 to 9.15.1, you should enable ARP initially in link:index.html#learn-about-arp-modes[learning mode] (or "dry-run" state). The system analyzes the workload to characterize normal behavior. Beginning in active mode can lead to excessive false positive reports.

It's recommended that you let ARP run in learning mode for a minimum of 30 days. Beginning with ONTAP 9.13.1, ARP automatically determines the optimal learning period interval and automates the switch, which might occur before 30 days.

*System Manager*

. Select *Storage > Volumes*, then select the volume you want to protect.
. In the *Security* tab of the *Volumes* overview, select *Status* to switch from Disabled to Enabled.
. Select *Enabled in learning-mode* in the *Anti-ransomware* box.
+
NOTE: Beginning with ONTAP 9.13.1, ARP automatically determines the optimal learning period interval and automates the switch. You can link:enable-default-task.html[disable this setting on the associated storage VM] if you want to control the learning mode to active mode transition manually.
+
[NOTE]
In existing volumes, learning and active modes only apply to newly written data, not to already existing data in the volume. The existing data is not scanned and analyzed, because the characteristics of earlier normal data traffic are assumed based on the new data after the volume is enabled for ARP.

. Verify the ARP state of the volume in the *Anti-ransomware* box.

*CLI*

*Enable ARP on an existing volume:*

[source, cli]
----
security anti-ransomware volume dry-run -volume <vol_name> -vserver <svm_name>
----

Learn more about `security anti-ransomware volume dry-run` in the link:https://docs.netapp.com/us-en/ontap-cli/security-anti-ransomware-volume-dry-run.html[ONTAP command reference^].

*Create a new volume with ARP enabled:*

[source, cli]
----
volume create -volume <vol_name> -vserver <svm_name> -aggregate <aggr_name> -size <nn> -anti-ransomware-state dry-run -junction-path </path_name>
----

*Disable automatic switching (optional):*

If you upgraded to ONTAP 9.13.1 through ONTAP 9.15.1 and want to manually control the switch from learning to active mode:

[source, cli]
----
vserver modify <svm_name> -anti-ransomware-auto-switch-from-learning-to-enabled false
----

*Verify the ARP state:*

[source, cli]
----
security anti-ransomware volume show
----
--
====

[[enable-nas-flexgroup]]
== Enable ARP on NAS FlexGroup volumes

You can enable ARP on NAS FlexGroup volumes using System Manager or the ONTAP CLI. The process differs based on your ONTAP version.

[role="tabbed-block"]
====
.ONTAP 9.18.1 and later
--
Beginning with ONTAP 9.18.1, ARP/AI is active immediately for FlexGroup volumes with no learning period required. The "dry-run" mode is not available for FlexGroup volumes in these versions.

*System Manager*

. Select *Storage > Volumes*, then select the FlexGroup volume you want to protect.
. In the *Security* tab of the *Volumes* overview, select *Status* to switch from Disabled to Enabled.
+
NOTE: The learning mode toggle is not available. ARP/AI is always enabled in active mode for FlexGroup volumes.

. Verify the ARP state of the volume in the *Anti-ransomware* box.

*CLI*

*Enable ARP on an existing FlexGroup volume:*

[source, cli]
----
security anti-ransomware volume enable -volume <vol_name> -vserver <svm_name>
----

NOTE: Specifying `dry-run` will result in immediate active protection for FlexGroup volumes.

*Create a new FlexGroup volume with ARP enabled:*

[source, cli]
----
volume create -volume <vol_name> -vserver <svm_name> -aggregate <aggr_name> -size <nn> -anti-ransomware-state enabled -junction-path </path_name>
----

*Verify the ARP state:*

[source, cli]
----
security anti-ransomware volume show
----
--

.ONTAP 9.13.1 to 9.17.1
--
For ONTAP 9.13.1 to 9.17.1, FlexGroup volumes start in link:index.html#learn-about-arp-modes[learning mode]. The system analyzes the workload to characterize normal behavior.

It's recommended that you let ARP run in learning mode for a minimum of 30 days. ARP automatically determines the optimal learning period interval and automates the switch, which might occur before 30 days.

*System Manager*

. Select *Storage > Volumes*, then select the FlexGroup volume you want to protect.
. In the *Security* tab of the *Volumes* overview, select *Status* to switch from Disabled to Enabled.
. Select *Enabled in learning-mode* in the *Anti-ransomware* box.
+
NOTE: ARP automatically determines the optimal learning period interval and automates the switch. You can link:enable-default-task.html[disable this setting on the associated storage VM] if you want to control the learning mode to active mode transition manually.

. Verify the ARP state of the volume in the *Anti-ransomware* box.

*CLI*

*Enable ARP on an existing FlexGroup volume:*

[source, cli]
----
security anti-ransomware volume dry-run -volume <vol_name> -vserver <svm_name>
----

*Create a new FlexGroup volume with ARP enabled:*

[source, cli]
----
volume create -volume <vol_name> -vserver <svm_name> -aggregate <aggr_name> -size <nn> -anti-ransomware-state dry-run -junction-path </path_name>
----

*Disable automatic switching (optional):*

If you want to manually control the switch from learning to active mode:

[source, cli]
----
vserver modify <svm_name> -anti-ransomware-auto-switch-from-learning-to-enabled false
----

*Verify the ARP state:*

[source, cli]
----
security anti-ransomware volume show
----
--
====

[[enable-san]]
== Enable ARP on SAN volumes

Beginning with ONTAP 9.17.1, you can enable ARP on SAN volumes. ARP/AI functionality is automatically enabled and enters an link:respond-san-entropy-eval-period.html[evaluation period] to determine if the workloads are suitable for ARP and sets an optimal encryption threshold for detection.

You can enable ARP on SAN volumes using System Manager or the ONTAP CLI.

[role="tabbed-block"]
====
.System Manager
--
.Steps
. Select *Storage > Volumes*, then select the SAN volume you want to protect.
. In the *Security* tab of the *Volumes* overview, select *Status* to switch from Disabled to Enabled.
. ARP/AI automatically enters the evaluation period.
. Verify the ARP state and evaluation status in the *Anti-ransomware* box.
+
To display ARP status for all volumes: In the *Volumes* pane, select *Show/Hide* then ensure that *Anti-ransomware* status is checked.
--

.CLI
--
*Enable ARP on an existing SAN volume:*

[source, cli]
----
security anti-ransomware volume enable -volume <vol_name> -vserver <svm_name>
----

*Create a new SAN volume with ARP enabled:*

[source, cli]
----
volume create -volume <vol_name> -vserver <svm_name> -aggregate <aggr_name> -size <nn> -anti-ransomware-state enabled
----

*Verify the ARP state and evaluation status:*

[source, cli]
----
security anti-ransomware volume show
----

Check the `Block device detection status` field to monitor the evaluation period progress.

Learn more about `security anti-ransomware volume show` in the link:https://docs.netapp.com/us-en/ontap-cli/security-anti-ransomware-volume-show.html[ONTAP command reference^].
--
====

.Related information

* link:switch-learning-to-active-mode.html[Switch to active mode after a learning period]

// 2025 May 27, ONTAPDOC-2960
// 2025 May 21, ontapdoc-2689
// 2025 Jan 22, ONTAPDOC-1070
// 2025-1-16, ontapdoc-2645
// 2024-9-17, ontapdoc-2204
// 2023-02-27, 1261
// 18 may 2023, ontapdoc-1046
// 2023-04-06, ONTAPDOC-931
// 2023 Mar 06, Git Issue 826
// 2022-08-25, BURT 1499112
// 2022 June 2, BURT 1466313
// 2022-03-30, Jira IE-517
// 2022-03-22, ontap-issues-419
// 2021-10-29, Jira IE-353
