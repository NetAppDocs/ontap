---
sidebar: sidebar
permalink: flexcache/flexcache-duality-faq.html
keywords: duality, faq, frequently asked questions, flexcache, ontap s3, s3, nas, smb, nfs
summary: "Frequently asked questions about FlexCache duality introduced in ONTAP 9.18.1."
---
= FAQ about FlexCache duality
:icons: font
:imagesdir: ./media/
[.lead]
This FAQ answers common questions about FlexCache duality introduced in ONTAP 9.18.1.

== Frequently asked questions

.What is "duality?"

Duality enables unified access to the same data using both file (NAS) and object (S3) protocols. Introduced in ONTAP 9.12.1 without FlexCache support, duality was extended in ONTAP 9.18.1 to include FlexCache volumes, allowing S3 protocol access to NAS files cached in a FlexCache volume.

.What S3 operations are supported on a FlexCache S3 bucket?

S3 operations supported on standard S3 NAS buckets are supported on FlexCache S3 NAS buckets, with the exception of the `COPY` operation. For an up-to-date list of unsupported operations for a standard S3 NAS bucket, visit the link:https://docs.netapp.com/us-en/ontap/s3-multiprotocol/index.html#s3-and-nas-interoperability[interoperability documentation].


.Can I use FlexCache in write-back mode with FlexCache duality?
No. If a FlexCache S3 NAS bucket is created on a FlexCache volume, the FlexCache volume *must* be in write-around mode. If you attempt to create a FlexCache S3 NAS bucket on a FlexCache volume in write-back mode, the operation will fail.


.I can't upgrade one of my clusters to ONTAP 9.18.1 because of hardware limitations. Will duality still work in my cluster if only the cache cluster is running ONTAP 9.18.1?
No. Both the cache cluster and origin cluster must have a minimum effective cluster version of 9.18.1. If you attempt to create a FlexCache S3 NAS bucket on a cache cluster peered with an origin running an ONTAP version earlier than 9.18.1, the operation will fail.

.I have a MetroCluster configuration. Can I use FlexCache duality?
No. FlexCache duality is not supported in MetroCluster configurations.

.Can I audit S3 access to files in a FlexCache S3 NAS bucket?
S3 auditing is provided by the NAS auditing functionality FlexCache volumes use. For more information about NAS auditing of FlexCache volumes, see link:audit-flexcache-volumes-concept.html[Learn more about FlexCache auditing].

.What should I expect if the cache cluster becomes disconnected from the origin cluster?
S3 requests to a FlexCache S3 NAS bucket will fail with a `503 Service Unavailable` error if the cache cluster is disconnected from the origin cluster.

.Can I use multipart S3 operations with FlexCache duality?
For multipart S3 operations to work, the underlying FlexCache volume must have the granular-data field set to 'advanced'. This field is set to whatever value is set for the origin volume.

.Does FlexCache duality support HTTP and HTTPS access?
Yes. By default, HTTPS is required. You can configure the S3 service to allow HTTP access if needed.

