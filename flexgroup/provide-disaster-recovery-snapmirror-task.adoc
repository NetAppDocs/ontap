---
permalink: flexgroup/provide-disaster-recovery-snapmirror-task.html
sidebar: sidebar
keywords: data, protection, workflow, flexgroup, volumes, snapmirror, snap mirror, disaster recovery, dr, unified, relationship
summary: "You can create SnapMirror disaster recovery (DR) relationships for FlexGroup volumes. Beginning with ONTAP 9.3, you can also backup and restore FlexGroup volumes by using SnapVault technology, and you can create a unified data protection relationship that uses the same destination for backup and DR."
---
= Data protection for FlexGroup volumes workflow summary
:icons: font
:imagesdir: ../media/

[.lead]
You can create SnapMirror disaster recovery (DR) relationships for FlexGroup volumes. Beginning with ONTAP 9.3, you can also backup and restore FlexGroup volumes by using SnapVault technology, and you can create a unified data protection relationship that uses the same destination for backup and DR.

// REMOVE THE FOLLOWING COMMENTS BEFORE COMMITTING FINAL DRAFT

// The data protection workflow consists of verifying the cluster and SVM peer relationships, creating a destination volume, creating a job schedule, specifying a policy, creating a data protection relationship, and initializing the relationship.

// image:flexgroups-data-protection-workflow.gif[FlexGroup volume disater recover preparation workflow]

The data protection workflow consists of the following tasks:

image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-1.png[1] Ensure that the clusters and SVMs are peered. 

If the clusters and SVMs are not peered, create the link:../peering/create-cluster-relationship-93-later-task.html[cluster peers] and the link:../peering/create-intercluster-svm-peer-relationship-93-later-task.html[SVM peers].

image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-2.png[2] Create the destination FlexGroup volume.

You should create a destination FlexGroup volume with the same constituent count as the source FlexGroup volume.

image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-3.png[3] Create a job schedule.

You must link:../data-protection/create-replication-job-schedule-task.html[create a job schedule] to determine when SnapMirror updates will take place.

image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-4.png[4] Depending on the type of data protection, follow one of these paths:

* *If SnapMirror DR:*

** Select the default policy `MirrorAllSnapshots` or a custom policy of type `async-mirror`.
** link:create-snapmirror-relationship-task.html[Create a SnapMirror relationship.]
  
* *If SnapMirror vault (ONTAP 9.3 and later):*

** Select the default policy `XDPDefault` or a custom policy of type `vault`.
** link:create-snapvault-relationship-task.html[Create a SnapMirror vault relationship.]
  
* *If unified data protection (ONTAP 9.3 and later):*

** Select the default policy `MirrorAndVault` or a custom policy of type `mirror-vault`.
** link:create-unified-data-protection-relationship-task.html[Create a unified data protection relationship.]

image:https://raw.githubusercontent.com/NetAppDocs/common/main/media/number-5.png[5] Initialize the data protection relationship.


.Protection relationship policy support

The SnapMirror relationship type is always `XDP` for FlexGroup volumes. The type of data protection that is provided by a SnapMirror relationship is determined by the replication policy that you use. You can use either the default policy or a custom policy of the required type for the replication relationship that you want to create. The following table shows the default policy types and supported custom policy types for different types of data protection relationships.

|===

h| Relationship type h| Default Policy h| Custom policy type
a|
SnapMirror DR
a|
MirrorAllSnapshots
a|
async-mirror
a|
SnapVault backup
a|
XDPDefault
a|
vault
a|
Unified data protection
a|
MirrorAndVault
a|
mirror-vault
|===


// 2025-Feb-12, ONTAPDOC-2750
// 08 DEC 2021, BURT 1430515
